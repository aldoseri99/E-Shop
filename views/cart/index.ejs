<h2>Your Cart</h2>
<% if (items.length > 0) { %>
<ul>
  <% items.forEach(function(cartItem) { %>
  <li class="d-flex align-items-center mb-3">
    <div class="me-3">
      <img
        src="/itemImages/<%= cartItem.item.image[0] %>"
        alt="<%= cartItem.item.name %> image"
        class="img-fluid"
        style="width: 150px; height: auto"
      />
    </div>

    <div class="flex-grow-1">
      <p class="mb-0 cart-product-details">
        <strong><%= cartItem.item.name %></strong> - $<%= cartItem.item.Price %>
      </p>
    </div>

    <div class="d-flex align-items-center">
      <form action="/cart/decrease" method="POST" class="d-inline">
        <input type="hidden" name="id" value="<%= cartItem.item._id %>" />
        <button type="submit" class="btn btn-outline-secondary">
          <i class="bi bi-dash"></i>
        </button>
      </form>

      <p class="mx-3 mb-0 cart-product-details"><%= cartItem.qty %></p>

      <form action="/cart/increase" method="POST" class="d-inline">
        <input type="hidden" name="id" value="<%= cartItem.item._id %>" />
        <button type="submit" class="btn btn-outline-secondary">
          <i class="bi bi-plus"></i>
        </button>
      </form>

      <a
        href="/cart/delete?id=<%= cartItem.item._id %>&qty=<%= cartItem.qty %>"
        class="btn btn-outline-danger ms-3"
      >
        <i class="bi bi-trash"></i>
      </a>
    </div>
  </li>

  <% }); %> <% const newItem = items.map(cartItem => cartItem.item.Price *
  cartItem.qty); const totalItem = newItem.reduce((accumulator, value) =>
  accumulator + value, 0); %>

  <hr />
  <h3>Total: $ <%= totalItem %></h3>
  <br />

  <div class="d-flex justify-content-between mt-4">
    <a href="/item/index" class="cart-continue-shopping"
      ><i class="bi bi-arrow-left"></i> Continue Shopping</a
    >

    <form method="POST" action="/checkout/index">
      <input value="<%= JSON.stringify(items) %>" type="hidden" name="items" />
      <input value="<%= JSON.stringify(cart) %>" type="hidden" name="cart" />
      <input value="<%= totalItem %>" type="hidden" name="total" />
      <button class="btn btn-primary" type="submit">checkout</button>
    </form>
  </div>
</ul>
<% } else { %>
<p><%= message %></p>
<% } %>
